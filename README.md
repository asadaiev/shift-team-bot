# Telegram Stats Bot

Telegram –±–æ—Ç –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É —á–∞—Ç–∞—Ö –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é FACEIT Elo.

## –§—É–Ω–∫—Ü—ñ—ó

- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (`/stats`) - —Ç–æ–ø-20 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- üéÆ FACEIT Elo (`/elo`) - —Ä–µ–π—Ç–∏–Ω–≥ Elo –¥–ª—è –ø—Ä–∏–≤'—è–∑–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- ‚è±Ô∏è –û—Ü—ñ–Ω–∫–∞ —á–∞—Å—É, –≤–∏—Ç—Ä–∞—á–µ–Ω–æ–≥–æ –Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª–∏
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
   ```bash
   pip install -r requirements.txt
   ```
3. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env.example` (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —ñ—Å–Ω—É—é—á–∏–π `.env`):
   ```bash
   cp .env.example .env
   ```
   > **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –Ø–∫—â–æ `.env` —Ñ–∞–π–ª –≤–∂–µ —ñ—Å–Ω—É—î –∑ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏, –≤—ñ–Ω –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π.
   
4. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å `.env` —Ñ–∞–π–ª (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ):
   - `BOT_TOKEN` - –æ–±–æ–≤'—è–∑–∫–æ–≤–æ (–æ—Ç—Ä–∏–º–∞–π—Ç–µ —É [@BotFather](https://t.me/BotFather))
   - `FACEIT_API_KEY` - –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –∫–æ–º–∞–Ω–¥–∏ `/elo`)

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

### –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç:

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `.env` —Ñ–∞–π–ª —ñ—Å–Ω—É—î –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º `BOT_TOKEN`:
   ```bash
   cat .env  # –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ BOT_TOKEN –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
   ```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ):
   ```bash
   pip3 install -r requirements.txt
   ```
   –∞–±–æ
   ```bash
   python3 -m pip install -r requirements.txt
   ```

3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:
   ```bash
   python3 main.py
   ```
   –∞–±–æ
   ```bash
   python main.py
   ```

4. –ë–æ—Ç –ø–æ—á–Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ. –î–ª—è –∑—É–ø–∏–Ω–∫–∏ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å `Ctrl+C`.

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏:

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –±–æ—Ç –º–∞—î:
- –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ Telegram API
- –ü–æ—á–∞—Ç–∏ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–∞—Ç–∞—Ö
- –í—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞ –∫–æ–º–∞–Ω–¥–∏ `/stats`, `/elo`, `/linkfaceit`, `/unlinkfaceit`

### –î–ª—è Heroku:

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `Procfile` (–≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ). –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö Heroku.

## –ö–æ–º–∞–Ω–¥–∏

- `/stats` - –ø–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (—Ç–æ–ø-20)
- `/linkfaceit <nickname>` - –ø—Ä–∏–≤'—è–∑–∞—Ç–∏ FACEIT –Ω—ñ–∫
- `/unlinkfaceit` - –≤—ñ–¥–≤'—è–∑–∞—Ç–∏ FACEIT –Ω—ñ–∫
- `/elo` - –ø–æ–∫–∞–∑–∞—Ç–∏ —Ä–µ–π—Ç–∏–Ω–≥ Elo –¥–ª—è –≤—Å—ñ—Ö –ø—Ä–∏–≤'—è–∑–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
tg-stats-bot/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py      # –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ database.py      # –†–æ–±–æ—Ç–∞ –∑ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ faceit.py        # FACEIT API –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ utils.py         # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ .env.example         # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ README.md
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (–¥–∏–≤. `.env.example`):

- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)
- `DB_PATH` - —à–ª—è—Ö –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: `stats.db`)
- `TYPING_CHARS_PER_MIN` - —à–≤–∏–¥–∫—ñ—Å—Ç—å –¥—Ä—É–∫—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 200)
- `SECONDS_OVERHEAD_PER_MSG` - –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 2—Å)
- `FACEIT_API_KEY` - API –∫–ª—é—á FACEIT (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- `FACEIT_GAME` - –≥—Ä–∞ –¥–ª—è FACEIT (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: `cs2`)
- `FACEIT_CACHE_TTL_SEC` - —á–∞—Å –∫–µ—à—É–≤–∞–Ω–Ω—è FACEIT –¥–∞–Ω–∏—Ö (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 300—Å)
- `FACEIT_MAX_CONCURRENCY` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 3)

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT
